# =========================
# Prefix key
# =========================
set -g prefix C-z
unbind C-b
bind C-z send-prefix

# =========================
# Pane indexing
# =========================
set -g base-index 1

# =========================
# Smart pane switching (Vim-aware)
# Uses modern tmux 3.x syntax
# =========================
# Function to detect Vim in pane
is_vim="ps -o state= -o comm= -t '#{pane_tty}' | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"

# Pane movement bindings
bind -n C-h if-shell "$is_vim" "send-keys C-h"  "select-pane -L"
bind -n C-j if-shell "$is_vim" "send-keys C-j"  "select-pane -D"
bind -n C-k if-shell "$is_vim" "send-keys C-k"  "select-pane -U"
bind -n C-l if-shell "$is_vim" "send-keys C-l"  "select-pane -R"
bind -n C-\\ if-shell "$is_vim" "send-keys C-\\" "select-pane -l"

# Copy-mode pane navigation
bind -T copy-mode-vi C-h select-pane -L
bind -T copy-mode-vi C-j select-pane -D
bind -T copy-mode-vi C-k select-pane -U
bind -T copy-mode-vi C-l select-pane -R
bind -T copy-mode-vi C-\\ select-pane -l

# =========================
# Misc key bindings
# =========================
# <prefix> + C-l clears screen
bind C-l send-keys C-l

# =========================
# Pane colors
# =========================
set -g pane-border-style fg=colour244,bg=default
set -g pane-active-border-style fg=colour124,bg=default

# =========================
# Status bar colors
# =========================
set -g status-style fg=colour235,bg=colour250,dim

# Active window highlighting
set -g window-status-current-style fg=colour15,bg=colour0

# =========================
# Terminal & mouse
# =========================
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ',xterm-256color:Tc'
set -g mouse on

# =========================
# Status bar content
# =========================
set -g status-left ''
set -g status-right '%H:%M'

# =========================
# Escape key delay
# =========================
set -s escape-time 0

# =========================
# Optional: default command for macOS copy/paste
# Uncomment if needed
# set-option -g default-command "reattach-to-user-namespace -l $SHELL"
